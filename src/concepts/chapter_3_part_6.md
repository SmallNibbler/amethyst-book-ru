# Диспетчер

## Что такое диспетчер?

`Dispatcher` - это сердце инфраструктуры ECS. Диспетчеры являются исполнителями, которые решают, когда системы будут запущены, чтобы они не пересекали друг друга. Когда диспетчер создан, он связан с системами, которые он будет выполнять. Затем он генерирует план выполнения, который учитывает правила изменяемости при максимальном параллелизме.

## Соблюдение правил изменяемости

Когда система хочет получить доступ к хранилищу или ресурсу, они могут сделать это либо изменяемо, либо неизменно. Это работает так же, как в Rust: либо только одна система может запросить что-то изменяемо, но ни одна другая система не может получить доступ к этим данным, или несколько систем могут запрашивать что-то, но только для чтения.

Диспетчер просматривает все `SystemData` в системах и строит этапы выполнения. Если вы хотите иметь наилучшую возможную производительность, вы должны отдавать предпочтение неизмененным запросам, а не изменяемым, когда это возможно. (`Read` вместо` Write`, `ReadStorage` вместо `WriteStorage`).

**Примечание.** Однако имейте в виду, что в большинстве случаев `Write` по-прежнему предпочтительнее блокировок, например, таких как `Mutex` или `RwLock`.

---

Документация была переведена специально для сообщества "**rust_lang_ru**".

Подпишись на нас в **[Telegram][telegram]** и **[YouTube][youtube]**!

[telegram]: http://tlinks.run/rust_lang_ru
[youtube]: https://www.youtube.com/channel/UCu413rnSfuSSOR3OsIThlZA
